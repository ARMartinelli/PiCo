language: cpp

addons:
  sonarcloud:
    organization: "falkenrambaldi-github" # the key of the org you chose at step #3
    token:
      secure: "oQBGiGwjFUjKLeCHhyPCT7cvlm5yjkrLnS5PW6+v8NI6Ly1WCvD3bVOAA9JuQnorluxZLsthsD4IBxT8RaLcg0ZsKmRH4VA/DcSFF97kC2CJPZOktG7fiFwPfE+AYAKTpHcKqXwtQkgU4hVkjrapSjfVI8OaLem5KfXBKToZC6f4A4m3r5bYZx+6MHich84DMcfEUcUH3mZqniiPUJNj+YdRk36j7RMOMm1cpcmzBwVNbIrK/FIdQrW993LN4x1cM20YiAw8T2jltns1jJRBa1mDtYVucXKASK4pBb33vPtzal/vBfJHci1ekkaa89BzC8uiDwruJPoF0eWrrU19wP2Ro5DSLAsGF9VzO9nNtqnXcNZ0cyenMsZ+jZSG4IXgWwtb4pPJvrDYcs3e3XGAg1ptPn65VJXsjGP7fgkAGmFQIp3MB022kkS/gUkBtOHftMb/NYNvYX73H79YopcIel4OF+sZ0AwnehRQ9lTPDHFOMFCIwWfM0t7KcN8ldBdCoaELYwVpaO0YB2IJgNVOG2q9OjRfkfZ0TieBpw6Tfk23cXvrOkZor7GyaDjGtfrYapHDhidOYbOPlYVR3mmVd+QgFgBN5P1h5P+kyeyqGMHSs7wfw7U8m5/ZuO0nBNyfvzHvimT3o51awuaHMe4sJGO9NXjDBKTG9AJ4Hllrkfc="


matrix:
  include:
    - os: osx
      osx_image: xcode10.1
      env:
        - MATRIX_EVAL="CC=clang && CXX=clang++"

    - os: linux
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
          packages:
            - g++-5

      env:
        - MATRIX_EVAL="CC=gcc-5 && CXX=g++-5"
    - os: linux
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
          packages:
            - g++-6

      env:
        - MATRIX_EVAL="CC=gcc-6 && CXX=g++-6"
    - os: linux
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
          packages:
            - g++-7

      env:
        - MATRIX_EVAL="CC=gcc-7 && CXX=g++-7"
    - os: linux
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
            - llvm-toolchain-trusty-5.0
          packages:
            - g++-7
            - clang-5.0
      env:
        - MATRIX_EVAL="CC=clang-5.0 && CXX=clang++-5.0"

before_install:
        - eval "${MATRIX_EVAL}"
install:
        - git clone --single-branch https://github.com/fastflow/fastflow.git
        - ln -s fastflow/ff ff
script:
        - mkdir build && cd build
        - cmake ..
        - make
        - ctest
        - sonar-scanner
